autonumber

actor 利用者

利用者 -> MainActivity : onCreate

activate MainActivity
  MainActivity -> MainActivity : settle

  activate MainActivity
    create HTTPClient
    MainActivity -> HTTPClient : new

    activate HTTPClient
      HTTPClient -> HTTPClient : credential

      autonumber stop
      HTTPClient --> MainActivity

      autonumber resume
      MainActivity ->> HTTPClient : sendRequest

      autonumber stop
      HTTPClient --> MainActivity
    deactivate HTTPClient

    destroy HTTPClient
  deactivate MainActivity

  autonumber resume
  MainActivity -> RegistrationView : showSettlement

  activate RegistrationView
    autonumber stop
    RegistrationView --> MainActivity
  deactivate RegistrationView

  autonumber resume
  MainActivity -> MainActivity : getCategories

  activate MainActivity
    create HTTPClient
    MainActivity -> HTTPClient : new

    activate HTTPClient
      HTTPClient -> HTTPClient : credential

      autonumber stop
      HTTPClient --> MainActivity

      autonumber resume
      MainActivity ->> HTTPClient : sendRequest

      autonumber stop
      HTTPClient --> MainActivity
    deactivate HTTPClient

    destroy HTTPClient
  deactivate MainActivity

  autonumber resume
  MainActivity -> RegistrationView : setCategories

  activate RegistrationView
    RegistrationView -> CategoryView : setCategories

    activate CategoryView
      autonumber stop
      CategoryView --> RegistrationView
    deactivate CategoryView

    RegistrationView --> MainActivity
  deactivate RegistrationView

  autonumber resume
  利用者 -> RegistrationView : onClick

  activate RegistrationView
    RegistrationView -> MainActivity : registPayment

    activate MainActivity
      MainActivity -> InputChecker : checkEmpty

      activate InputChecker
        autonumber stop
        InputChecker --> MainActivity
      deactivate InputChecker

      alt 空欄がある
        autonumber resume
        MainActivity -> RegistrationView : showMessage

        activate RegistrationView
          autonumber stop
          RegistrationView --> MainActivity
        deactivate RegistrationView

        autonumber resume
        MainActivity -> RegistrationView : showWrongInput

        activate RegistrationView
          autonumber stop
          RegistrationView --> MainActivity
        deactivate RegistrationView
      end

      autonumber resume
      MainActivity -> InputChecker : checkDate

      activate InputChecker
        autonumber stop
        InputChecker --> MainActivity
      deactivate InputChecker

      alt 日付が不正
        autonumber resume
        MainActivity -> RegistrationView : showMessage

        activate RegistrationView
          autonumber stop
          RegistrationView --> MainActivity
        deactivate RegistrationView

        autonumber resume
        MainActivity -> RegistrationView : showWrongInput

        activate RegistrationView
          autonumber stop
          RegistrationView --> MainActivity
        deactivate RegistrationView
      end

      autonumber resume
      MainActivity -> InputChecker : checkPrice

      activate InputChecker
        autonumber stop
        InputChecker --> MainActivity
      deactivate InputChecker

      alt 金額が不正
        autonumber resume
        MainActivity -> RegistrationView : showMessage

        activate RegistrationView
          autonumber stop
          RegistrationView --> MainActivity
        deactivate RegistrationView

        autonumber resume
        MainActivity -> RegistrationView : showWrongInput

        activate RegistrationView
          autonumber stop
          RegistrationView --> MainActivity
        deactivate RegistrationView
      end

      autonumber resume
      create HTTPClient
      MainActivity -> HTTPClient : new

      activate HTTPClient
        HTTPClient -> HTTPClient : credential

        autonumber stop
        HTTPClient --> MainActivity

        autonumber resume
        MainActivity ->> HTTPClient : sendRequest

        autonumber stop
        HTTPClient --> MainActivity
      deactivate HTTPClient

      destroy HTTPClient

      autonumber resume
      MainActivity -> RegistrationView : showMessage

      activate RegistrationView
        autonumber stop
        RegistrationView --> MainActivity
      deactivate RegistrationView

      autonumber resume
      MainActivity -> RegistrationView : resetField

      activate RegistrationView
        autonumber stop
        RegistrationView --> MainActivity
      deactivate RegistrationView

      autonumber resume
      MainActivity -> RegistrationView : setToday

      activate RegistrationView
        autonumber stop
        RegistrationView --> MainActivity
      deactivate RegistrationView

      autonumber resume
      MainActivity -> MainActivity : settle

      activate MainActivity
        create HTTPClient
        MainActivity -> HTTPClient : new

        activate HTTPClient
          HTTPClient -> HTTPClient : credential

          autonumber stop
          HTTPClient --> MainActivity

          autonumber resume
          MainActivity ->> HTTPClient : sendRequest

          autonumber stop
          HTTPClient --> MainActivity
        deactivate HTTPClient

        destroy HTTPClient
      deactivate MainActivity

      autonumber resume
      MainActivity -> RegistrationView : showSettlement

      activate RegistrationView
        autonumber stop
        RegistrationView --> MainActivity
      deactivate RegistrationView

      MainActivity --> RegistrationView
    deactivate MainActivity

    RegistrationView --> MainActivity
  deactivate RegistrationView

MainActivity --> 利用者
