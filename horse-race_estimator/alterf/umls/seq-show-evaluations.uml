autonumber

actor 利用者
利用者 -> EvaluationView : 評価画面表示

activate EvaluationView
  EvaluationView -> EvaluationsController : manage

  activate EvaluationsController
    EvaluationsController -> EvaluationsController : remove_old_files
    EvaluationsController -> Evaluation : all
  deactivate EvaluationsController

  loop 3秒間隔
    EvaluationView -> "Api::EvaluationsController" : index

    activate "Api::EvaluationsController"
      "Api::EvaluationsController" -> Evaluation : all

      autonumber stop
      EvaluationView <-- "Api::EvaluationsController" : 画面を更新
    deactivate "Api::EvaluationsController"
  end
deactivate EvaluationView

autonumber resume
利用者 -> EvaluationView : 詳細ボタン押下

activate EvaluationView
  EvaluationView -> EvaluationsController : show

  activate EvaluationsController
    EvaluationsController -> EvaluationsController : remove_old_files
    EvaluationsController -> Evaluation : find_by

    autonumber stop
    EvaluationResultView <-- EvaluationsController : 画面を表示
  deactivate EvaluationsController

  loop 3秒間隔
    autonumber resume
    EvaluationResultView -> "Api::EvaluationsController" : show

    activate "Api::EvaluationsController"
      "Api::EvaluationsController" -> Evaluation : find_by

      autonumber stop
      EvaluationResultView <-- "Api::EvaluationsController" : 画面を更新
    deactivate "Api::EvaluationsController"
  end
deactivate EvaluationResultView
