autonumber

aggregate -> Entry : pluck
aggregate -> Feature : pluck

loop 差分だけ繰り返す
  aggregate -> Race : find_by

  opt レース情報が存在する場合
    aggregate -> Horse : find_by

    opt 競走馬情報が存在する場合
      aggregate -> Entry : find_by

      opt エントリー情報が存在する場合
        aggregate -> aggregate : extra_attribute
        aggregate -> Feature : create!
      end
    end
  end
end
