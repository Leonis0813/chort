autonumber

loop for each date
  collect -> HTTPClient : get

  autonumber stop
  collect <-- HTTPClient

  loop for each race_id
    autonumber resume
    collect -> HTTPClient : get

    autonumber stop
    collect <-- HTTPClient

    autonumber resume
    create Race
    collect -> Race : new

    loop for each entry
      create Entry
      Race -> Entry : new
      create Result
      Entry -> Result : new
    end

    collect -> Race : save!

    loop for each entry
      Race -> Entry : save!
      Entry -> Result : save!
    end

    autonumber stop
    collect <-- Race
  end
end
