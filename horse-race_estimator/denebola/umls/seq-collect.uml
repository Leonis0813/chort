autonumber

loop 指定された期間内を日付ごとに繰り返し
  collect -> CollectUtil : get_race_ids

  activate CollectUtil
    alt レースIDファイルが存在する
      CollectUtil -> File : read
    else
      CollectUtil -> HTTPClient : get
      CollectUtil -> File : write
    end
  deactivate CollectUtil

  loop レースIDごとに繰り返し
    collect -> CollectUtil : get_race_html

    activate CollectUtil
      alt レース情報ファイルが存在する
        CollectUtil -> File : read
      else
        CollectUtil -> HTTPClient : get
        CollectUtil -> File : write
      end
    deactivate CollectUtil

    loop レースのエントリーごとに繰り返し
      collect -> CollectUtil : get_horse_html

      activate CollectUtil
        alt 競走馬情報ファイルが存在しない
          CollectUtil -> HTTPClient : get
          CollectUtil -> File : write
        end
      deactivate CollectUtil
    end
  end
end
