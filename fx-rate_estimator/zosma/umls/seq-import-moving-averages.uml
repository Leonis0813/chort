autonumber

loop for each month
  alt ファイルが存在する
    "import/moving_averages" -> "Archive::Tar::Minitar" : unpack
  end
end

loop for each date
  "import/moving_averages" -> "import/moving_averages" : Dir[]

  loop ファイル数分繰り返す
    "import/moving_averages" -> "import/moving_averages" : ファイル書き込み
    "import/moving_averages" -> ActiveRecord : execute
  end

  "import/moving_averages" -> MovingAverage : where

  autonumber stop
  "import/moving_averages" <-- MovingAverage : 移動平均

  alt 移動平均が存在している かつ バックアップファイルでない
    "import/moving_averages" -> "import/moving_averages" : ファイル書き込み
  end
end
