autonumber

actor 利用者

利用者 -> MainActivity : onCreate

activate MainActivity
  MainActivity -> MainActivity : settle

  create HTTPClient
  MainActivity -> HTTPClient : new

  activate HTTPClient
    HTTPClient -> HTTPClient : credential

    autonumber stop
    HTTPClient --> MainActivity

    autonumber resume
    MainActivity ->> HTTPClient : sendRequest

    autonumber stop
    HTTPClient --> MainActivity
  deactivate HTTPClient

  destroy HTTPClient

  autonumber resume
  MainActivity -> CreateView : showSettlement

  activate CreateView
    autonumber stop
    CreateView --> MainActivity
  deactivate CreateView

  autonumber resume
  MainActivity -> MainActivity : getCategories

  create HTTPClient
  MainActivity -> HTTPClient : new

  activate HTTPClient
    HTTPClient -> HTTPClient : credential

    autonumber stop
    HTTPClient --> MainActivity

    autonumber resume
    MainActivity ->> HTTPClient : sendRequest

    autonumber stop
    HTTPClient --> MainActivity
  deactivate HTTPClient

  destroy HTTPClient

  autonumber resume
  MainActivity -> CreateView : setCategories

  activate CreateView
    CreateView -> create.CategoryView : setCategories

    activate create.CategoryView
      autonumber stop
      create.CategoryView --> CreateView
    deactivate create.CategoryView

    CreateView --> MainActivity
  deactivate CreateView

  autonumber resume
  利用者 -> CreateView : onClick

  activate CreateView
    CreateView -> MainActivity : createPayment
    MainActivity -> InputChecker : checkEmpty

    activate InputChecker
      autonumber stop
      InputChecker --> MainActivity
    deactivate InputChecker

    alt 空欄がある
      autonumber resume
      MainActivity -> CreateView : showMessage

      autonumber stop
      CreateView --> MainActivity

      autonumber resume
      MainActivity -> CreateView : showWrongInput

      autonumber stop
      CreateView --> MainActivity
    end

    autonumber resume
    MainActivity -> InputChecker : checkDate

    activate InputChecker
      autonumber stop
      InputChecker --> MainActivity
    deactivate InputChecker

    autonumber resume
    MainActivity -> InputChecker : checkPrice

    activate InputChecker
      autonumber stop
      InputChecker --> MainActivity
    deactivate InputChecker

    alt 不正な入力がある
      autonumber resume
      MainActivity -> CreateView : showMessage

      autonumber stop
      CreateView --> MainActivity

      autonumber resume
      MainActivity -> CreateView : showWrongInput

      autonumber stop
      CreateView --> MainActivity
    end

    autonumber resume
    create HTTPClient
    MainActivity -> HTTPClient : new

    activate HTTPClient
      HTTPClient -> HTTPClient : credential

      autonumber stop
      HTTPClient --> MainActivity

      autonumber resume
      MainActivity ->> HTTPClient : sendRequest

      autonumber stop
      HTTPClient --> MainActivity
    deactivate HTTPClient

    destroy HTTPClient

    autonumber resume
    MainActivity -> CreateView : showMessage

    autonumber stop
    CreateView --> MainActivity

    autonumber resume
    MainActivity -> CreateView : resetField

    autonumber stop
    CreateView --> MainActivity

    autonumber resume
    MainActivity -> CreateView : setToday

    autonumber stop
    CreateView --> MainActivity

    autonumber resume
    MainActivity -> MainActivity : settle

    create HTTPClient
    MainActivity -> HTTPClient : new

    activate HTTPClient
      HTTPClient -> HTTPClient : credential

      autonumber stop
      HTTPClient --> MainActivity

      autonumber resume
      MainActivity ->> HTTPClient : sendRequest

      autonumber stop
      HTTPClient --> MainActivity
    deactivate HTTPClient

    destroy HTTPClient

    autonumber resume
    MainActivity -> CreateView : showSettlement

    autonumber stop
    CreateView --> MainActivity
    MainActivity --> CreateView
    CreateView --> MainActivity
  deactivate CreateView

MainActivity --> 利用者
