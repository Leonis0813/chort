class ManagementView <<Boundary>>
class CategoryView <<Boundary>>
class DictionaryView <<Boundary>>
class PaymentView <<Boundary>>
class TagView <<Boundary>>
class StatisticsView <<Boundary>>

class ApplicationController {
  + check_absent_param(request_param : Hash<String, Object>, required_param_keys : Array) : void
}

class CategoriesController {
  + index(request : Object) : Object
  - index_param() : Hash<String, Object>
  - scope_param() : Hash<String, Object>
}

class DictionariesController {
  + index(request : Object) : Object
  - index_param() : Hash<String, Object>
  - scope_param() : Hash<String, Object>
}

class PaymentsController {
  + index(request : Object) : Object
  - index_param() : Hash<String, Object>
  - scope_param() : Hash<String, Object>
  - per_page() : Integer
}

class StatisticsController {
}

class TagsController {
  + index(request : Object) : Object
  - index_param() : Hash<String, Object>
  - scope_param() : Hash<String, Object>
  - per_page() : Integer
}

class Api::CategoriesController {
  + index(request : Object) : Object
}

class Api::DictionariesController {
  + create(request : Object) : Object
  + index(request : Object) : Object
  - create_params() : Array
  - index_params() : Array
}

class Api::PaymentsController {
  + create(request : Object) : Object
  + show(request : Object) : Object
  + index(request : Object) : Object
  + update(request : Object) : Object
  + destroy(request : Object) : Object
  - check_request_payment() : void
  - payment() : Payment
  - create_params() : Hash<String, Object>
  - index_params() : Array
}

class Api::TagsController {
  + create(request : Object) : Object
  + assign_payments(request : Object) : Object
  - check_request_tag() : void
  - tag() : Tag
  - create_params() : Hash<String, Object>
  - assign_payments_params() : Hash<String, Object>
}

class Api::SettlementsController {
  + category(request : Object) : Object
  + period(request : Object) : Object
  - check_query_params(query : Settlement, param : String) : void
}

class Category {
  + category_id : String
  + name : String
  + description : String
}

class CategoryQuery {
  - name_include : String
  + attributes() : Hash<String, Object>
}

class Dictionary {
  + dictionary_id : String
  + phrase : String
  + condition : String
}

class DictionaryQuery {
  - phrase_include : String
  + attributes() : Hash<String, Object>
}

class Payment {
  + payment_id : String
  + payment_type : String
  + date : Date
  + content : String
  + price : Fixnum
}

class PaymentQuery {
  - payment_type : String
  - date_before : String
  - date_after : String
  - content_equal : String
  - content_include : String
  - category : String
  - tag : String
  - price_upper : Integer
  - price_lower : Integer
  - sort : String
  + date_valid?() : void
  + period_valid?() : void
  + attributes() : Hash<String, Object>
}

class Query {
  - page : Integer
  - per_page : Integer
  - sort : String
  - order : String
  + attributes() : Hash<String, Object>
}

class Settlement {
  - aggregation_type : String
  - interval : String
  - payment_type : String
  + calculate() : Hash<String, Object>
  + attributes() : Hash<String, Object>
  - calculate_by_category() : Array<Object>
  - calculate_by_period() : Array<Object>
  - group_by_period() : Hash<String, Fixnum>
}

class Tag {
  + tag_id : String
  + name : String
}

class TagQuery {
  - name_include : String
  + attributes() : Hash<String, Object>
}

ブラウザ -- ManagementView
ブラウザ -- StatisticsView

アプリケーション -- Api::PaymentsController
アプリケーション -- Api::CategoriesController
アプリケーション -- Api::SettlementsController

ManagementView -- PaymentView
ManagementView -- CategoryView
ManagementView -- DictionaryView
ManagementView -- TagView

ApplicationController <|-- CategoriesController
ApplicationController <|-- DictionariesController
ApplicationController <|-- PaymentsController
ApplicationController <|-- TagsController
ApplicationController <|-- Api::CategoriesController
ApplicationController <|-- Api::DictionariesController
ApplicationController <|-- Api::PaymentsController
ApplicationController <|-- Api::SettlementsController
ApplicationController <|-- Api::TagsController

CategoryView -- CategoriesController

DictionaryView -- DictionariesController
DictionaryView -- Api::DictionariesController

PaymentView -- PaymentsController
PaymentView -- Api::PaymentsController
PaymentView -- Api::DictionariesController

TagView -- TagsController
TagView -- Api::TagsController

CategoriesController "1" -- "0 .. *" Category
CategoriesController -- CategoryQuery
Api::CategoriesController "1" -- "0 .. *" Category
Api::CategoriesController -- CategoryQuery

DictionariesController "1" -- "0 .. *" Dictionary
DictionariesController -- DictionaryQuery
Api::DictionariesController "1" -- "0 .. *" Dictionary
Api::DictionariesController -- DictionaryQuery

PaymentsController "1" -- "0 .. *" Payment
PaymentsController -- PaymentQuery
Api::PaymentsController "1" -- "0 .. *" Payment
Api::PaymentsController -- PaymentQuery

TagsController "1" -- "0 .. *" Tag
TagsController -- TagQuery
Api::TagsController "1" -- "1" Tag
Api::TagsController "1" -- "1 .. *" Payment

Payment "1 .. *" -- "1 .. *" Category
Payment "1 .. *" -- "0 .. *" Tag
Dictionary "0 .. *" -- "1 .. *" Category

Query <|-- CategoryQuery
Query <|-- DictionaryQuery
Query <|-- PaymentQuery
Query <|-- TagQuery

StatisticsView -- StatisticsController
StatisticsView -- Api::SettlementsController
Api::SettlementsController "1" -- "1" Settlement
Settlement "1" -- "0 .. *" Payment
