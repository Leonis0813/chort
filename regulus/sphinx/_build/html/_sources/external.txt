機能仕様
============

-  システムの振る舞いと構造を記載する

  -  `振る舞い <http://localhost/regulus_docs/external.html#id2>`__
  -  `構造 <http://localhost/regulus_docs/external.html#id5>`__

振る舞い
--------

通貨の価格変動を確認する
^^^^^^^^^^^^^^^^^^^^^^^^

シーケンス図
            
.. image:: images/seq_graph_ext.jpg
   :alt: シーケンス図(通貨の価格変動を確認する)

- 利用者がWebページにアクセスしてからグラフを確認するまでの流れ

  1. ブラウザにURLを入力してシステムにアクセス
  2. Webページを表示
  3. 通貨情報を取得してグラフを作成
  4. 作成したグラフをブラウザに表示

- システムは常にDBから通貨情報を取得してグラフを更新する
- 通貨情報は30秒間隔でFXサイトから収集され、DBに登録される
- グラフは10秒間隔で更新される

変動に関連する情報を確認する
^^^^^^^^^^^^^^^^^^^^^^^^^^^^

シーケンス図
            
.. image:: images/seq_info_ext.jpg
   :alt: シーケンス図(変動に関連する情報を確認する)

- 利用者がWebページにアクセスしてから関連情報を確認するまでの流れ

  1. ブラウザにURLを入力してシステムにアクセス
  2. Webページを表示
  3. システムがDBからツイートを取得
  4. システムがDBから日経記事を取得
  5. 取得した情報をブラウザに表示

- システムは常にDBからツイート、日経記事を取得する
- 関連情報はTwitter, 日経から収集され、DBに登録される
- ツイートは1秒間隔で更新される
- 日経記事は10分間隔で更新される

構造
----

クラス図
        
.. image:: images/class_ext.jpg
   :alt: クラス図

- MVCモデルを利用する

- View

  - Webブラウザ
  - ユーザーが見れるように情報を表示するためのクラス

- Controller

  - ブラウザ管理

    - 通貨情報や関連情報を表示するWebページを管理するクラス

  - 通貨管理

    - 通貨情報を取得してブラウザに表示されている通貨情報を更新するクラス

  - ツイート管理

    - ツイートを取得してブラウザに表示されているツイートを更新するクラス

  - 記事管理

    - 記事を取得してブラウザに表示されている記事を更新するクラス

- Model

  - 通貨情報

    - FXサイトから取得した通貨情報
    - 以下の情報を保持する

      - 通貨情報を取得した日時
      - 通貨の種類
      - レート

  - ツイート

    - Twitterから取得したツイート
    - 以下の情報を保持する

      - ツイートID
      - ユーザーID
      - プロフィール画像のURL
      - 本文
      - ツイート日時
      - ツイートを取得した日時

  - 記事

    - 日経から取得した記事
    - 以下の情報を保持する

      - 記事が発行された日時
      - タイトル
      - 要約
      - 記事へのURL
      - 記事を取得した日時
